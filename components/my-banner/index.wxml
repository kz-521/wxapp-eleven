<view class="container">
    <view class="inner-container">
        <!-- 头像和昵称区域 -->
        <view class="user-section">
            <view class="avatar-wrapper">
                <!-- 用户头像显示 -->
                <l-avatar wx:if="{{userInfo && userInfo.avatarUrl}}" 
                          size="140" class="avatar-container"
                          l-class="avatar" shape="square"
                          src="{{userInfo.avatarUrl}}"
                          bind:tap="onAvatarTap">
                </l-avatar>
                
                <!-- 默认头像 -->
                <l-avatar wx:else
                          size="140" class="avatar-container"
                          l-class="avatar" shape="square"
                          src="/imgs/logo.png"
                          bind:tap="onAvatarTap">
                </l-avatar>

                <!-- 透明覆盖按钮：点击头像选择头像 -->
                <button class="avatar-overlay-btn" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar"></button>
            </view>
            
            <!-- 用户昵称显示 -->
            <view class="user-info-container">
                <text class="user-nickname" wx:if="{{userInfo && userInfo.nickName}}">{{userInfo.nickName}}</text>
                <text class="user-nickname" wx:else>点击头像登录</text>
                
                <!-- 手机号显示 -->
                <text class="user-phone" wx:if="{{userInfo && userInfo.phoneNumber && userInfo.phoneNumber !== '138****8888'}}">{{userInfo.phoneNumber}}</text>
                <text class="user-phone" wx:elif="{{userInfo && userInfo.purePhoneNumber && userInfo.purePhoneNumber !== '13888888888'}}">{{userInfo.purePhoneNumber}}</text>
                <text class="user-phone" wx:else>未绑定手机号</text>
            </view>
        </view>
        
        <!-- 获取手机号按钮 -->
        <l-button wx:if="{{!userInfo || (!userInfo.phoneNumber && !userInfo.purePhoneNumber) || (userInfo.phoneNumber === '138****8888' && userInfo.purePhoneNumber === '13888888888')}}" 
                  l-class="phone-btn"
                  bg-color="#477676"
                  open-type="getPhoneNumber"
                  bind:getphonenumber="onGetPhoneNumber"
                  height="48"
                  width="120">
            绑定手机号
        </l-button>
        
        <l-button wx:if="{{showLoginBtn}}" l-class="auth-btn"
                  bg-color="#DCEBE6"
                  open-type="getUserInfo"
                  bind:getuserinfo="onAuthUserInfo"
                  height="48"
                  width="120">
            登 陆
        </l-button>
        <view class="row-bottom">
            <view class="bottom-container">
                <view bind:tap="onGotoBalance" class="left">
                    <text>{{balance}}</text>
                    <text>余额</text>
                </view>
                <view class="v-line"></view>
                <view bind:tap="onGotoMyCoupon" class="right">
                    <text>{{couponCount}}</text>
                    <text>优惠券</text>
                </view>
            </view>
        </view>
    </view>
</view>